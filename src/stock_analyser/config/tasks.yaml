researcher_task:
  description: >
    Conduct broad market research for ticker symbol {name} using the assigned LLM's capabilities and web search to uncover general news, developments,
    analyst ratings, future price predictions, potential risks, and insights into major shareholders, institutional investors, and insiders.
    This task focuses on gathering qualitative information and market context that complements the detailed quantitative analyses provided by other specialized agents.
    The current year is {current_year}.
  expected_output: >
    A comprehensive report with 40 bullet points detailing the most relevant fundamental and market information about ticker symbol {name}, including structured financial data from Finnhub and a summary of the company's financial health.
  agent: researcher

reporter_task:
  description: >
    Review the context you got from researcher_task and expand each topic into a full section for a report.
    Make sure the report is detailed and contains any and all relevant information.
  expected_output: >
    A fully fledged report with the main topics, each with a full section of information.
    The report MUST include relevant charts and graphs (e.g., historical prices, MACD, RSI) generated using the visualization tools to illustrate technical analysis findings.
    Charts should be embedded as base64 encoded images within the markdown report.
    Formatted as markdown without '```'
  context:
    - researcher_task
    - sentiment_analysis_task
    - technical_analyst_task
    - chart_pattern_analysis_task
    - fundamental_analysis_task
  markdown: true
  agent: reporter

chart_pattern_analysis_task:
  description: >
    Analyze historical price charts for {name} to identify significant chart patterns
    such as support and resistance levels, head and shoulders, double tops/bottoms,
    and triangles. Interpret these patterns for potential future price movements and provide insights.
    The current year is {current_year}.
  expected_output: >
    A detailed analysis of identified chart patterns for {name}, including descriptions of patterns,
    their implications for price action, and potential trading signals.
    Formatted as markdown without '```'
  agent: technical_analyst

fundamental_analysis_task:
  description: >
    Perform a deep fundamental analysis for ticker symbol {name}.
    Retrieve comprehensive financial statements (income statement, balance sheet, cash flow statement) for the last 5 years
    using the Finnhub API. Calculate and interpret key financial ratios such as P/E ratio, EPS, Debt-to-Equity,
    Current Ratio, and Return on Equity. Provide an overall assessment of the company's financial health and intrinsic value.
    The current year is {current_year}.
  expected_output: >
    A detailed fundamental analysis report for {name}, including:
    - Summaries of key financial statements.
    - Calculated and interpreted financial ratios.
    - An overall assessment of financial health, intrinsic value, and long-term investment potential.
    Formatted as markdown without '```'
  context:
    - researcher_task
  agent: fundamental_analyst

technical_analyst_task:
  description: >
    Perform a comprehensive technical analysis for the ticker symbol {name}.
    Utilize Finnhub data to retrieve historical stock prices and calculate
    key technical indicators such as Moving Averages (SMA, EMA), Relative Strength Index (RSI),
    Moving Average Convergence Divergence (MACD), and Bollinger Bands.
    Interpret these indicators to identify trends, momentum, and potential buy/sell signals.
    Focus on providing actionable insights based on the technical patterns observed.
    The current year is {current_year}.
  expected_output: >
    A detailed technical analysis report for {name}, including:
    - Current price and recent price movements.
    - Calculated values and interpretations for SMA, EMA, RSI, MACD, and Bollinger Bands.
    - Identification of key support and resistance levels.
    - Potential bullish or bearish signals.
    - A summary of overall technical outlook and recommendations.
    Formatted as markdown without '```'
  agent: technical_analyst

sentiment_analysis_task:
  description: >
    Utilize Finnhub's news and sentiment data capabilities, and conduct broader web searches to gauge public and market sentiment towards the ticker symbol {name}.
    Gather news sentiment data using the Finnhub API and also search for additional news articles, social media discussions, and analyst opinions to gain a comprehensive understanding of the sentiment.
    Integrate all gathered sentiment data into the analysis report, identifying key trends and their potential impact.
    The current year is {current_year}.
  expected_output: >
    A concise summary of the news sentiment for {name}, including overall sentiment scores, any notable positive or negative news trends, and their potential impact on the stock.
    Formatted as markdown without '```'
  agent: sentiment_analyst
